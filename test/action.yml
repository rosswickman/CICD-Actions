---

name: 'Hello World'
description: 'Delivers AWS CloudFormation Templates to S3 bucket for deployment in console or CICD'
inputs:
  bucket:
    description: 'destination bucket for delivery'
    required: true
    default: 'default-bucket'
  prefix:
    description: 'prefix/folder for location of template'
    required: true
    default: 'default-prefix'
  region:
    description: 'region of bucket and delivery'
    required: true
    default: 'default-region'
  cft-dir:
    description: 'directory of templates to be delivered'
    required: true
    default: 'default-dir'
outputs:
  delivery-status: 
    description: "delivery status"
    value: ${{ steps.delivery-status.outputs.status }}
runs:
  using: "composite"
  steps: 
    - run: echo "Delivering templates to: [ Bucket: ${{ inputs.bucket }}/${{ inputs.prefix }} ]."
      shell: bash
    - run: echo "aws s3 sync ./ s3://${{inputs.bucket}}/${{inputs.prefix}}/${{github.event.repository.name}} --region ${{inputs.region}}"
      shell: bash
    - id: delivery-status
      run: echo "::set-output name=status::$(echo Deliver successful?)"
      shell: bash
